<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>旋转木马</title>
    <style>
        * {
            padding: 0;
            margin: 0;
        }

        #table {
            margin: 100px auto;
            width: 1000px;
            height: 400px;
            background: gray;
            position: relative;
            -webkit-perspective: 800px;
            -webkit-perspective-origin: center -50%;
        }

        #container {
            width: 128px;
            height: 100px;
            position: absolute;
            left: 50%;
            margin-left: -64px;
            top: 150px;
            -webkit-transform-style: preserve-3d;
            -webkit-transition: transform 0.5s ease-in-out;
        }

        #container img {
            width: 128px;
            height: 100px;
            position: absolute;
            /*-webkit-transition: transform 0.5ms ease;*/
            -webkit-transition: transform .5s ease-in-out;

        }

    </style>
</head>
<body>
<div id="table">
    <div id="container">
        <!--<img src="img/1.jpg" alt="">-->
        <!--<img src="img/2.jpg" alt="">-->
        <!--<img src="img/3.jpg" alt="">-->
        <!--<img src="img/4.jpg" alt="">-->
        <!--<img src="img/5.jpg" alt="">-->
        <!--<img src="img/6.jpg" alt="">-->
        <!--<img src="img/7.jpg" alt="">-->
        <!--<img src="img/8.jpg" alt="">-->
        <!--<img src="img/9.jpg" alt="">-->
    </div>
</div>
<script>
    var oContainer = document.getElementById('container');


    for (var i = 0; i < 9; i++) {
        var oImg = new Image();
        var iNow = 0;
        oImg.onload = function () {
            iNow++;8
            if (iNow == 9) {
                for (var i = 0; i < aImg.length; i++) {
                    (function (index) {
                        timer = setTimeout(function () {
                            aImg[index].style.webkitTransform = 'rotateY(' + -index * 40 + 'deg) translateZ(' + (translateDis + 20) + 'px)';
                        }, (9 - i) * 100)
                    })(i);
                }
//                var j = 8;
//                var timer1 = setInterval(function () {
//                    if (j == 0) {
//                        clearInterval(timer1)
//                    }
//                    aImg[j].style.WebkitTransform = 'rotateY(' + -j * 40 + 'deg) translateZ(' + (translateDis + 20) + 'px)';
//                    j--;
//                }, 100);
                var idx = 0;
                oContainer.onclick = function () {
                    idx++;
                    console.log(idx);
                    this.style.webkitTransform = 'rotateY(' + -40 * idx + 'deg)';
                };

                document.onselectstart = function () {
                    return false;
                }
            }
        };
        oImg.src = 'img/' + (i + 1) + '.jpg';
        oContainer.appendChild(oImg);
    }
    var aImg = oContainer.getElementsByTagName('img');
    var translateDis = 64 / Math.tan(20 * Math.PI / 180);
</script>
</body>
</html>