<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>旋转木马</title>
    <style>
        *{
            padding: 0;
            margin: 0;
        }
        #table{
            width: 500px;
            height: 400px;
            margin: 100px auto;
            background: grey;
            position: relative;
            -webkit-perspective: 800px;
            -webkit-perspective-origin: 50% -10%;
        }
        #container{
            width: 180px;
            height: 100px;
            position: absolute;
            left: 50%;
            top: 150px;
            margin-left:-90px;
            /*background: black;*/
            -webkit-transform-style: preserve-3d;
            -webkit-transition: transform .5s ease-in-out;

        }
        #container img{
            width: 180px;
            height: 100px;
            position: absolute;
            -webkit-transition: all .5s ease-in-out;

        }
    </style>
</head>
<body>
<div id="table">
    <div id="container">

    </div>
</div>
<script>
    var oContainer = document.getElementById('container');
    var iNow = 0;
    for(var i=0 ; i<9;i++){
        var oImg = new Image();
        oImg.onload=function () {
            iNow++;
            if (iNow==9){
              for(var i=0;i<aImg.length;i++){
                  (function (index) {
                      setTimeout(function () {
                          aImg[index].style.webkitTransform='rotateY('+ index*40+'deg) translateZ('+ (dis+20) +'px)'
                      },(9-i)*100)
                  })(i);
              }
            }
        };
        oImg.src = 'img/'+(i+1)+'.jpg';
        oContainer.appendChild(oImg);
    }
    var aImg = document.getElementsByTagName('img');
    var dis   = aImg[0].offsetWidth/2/Math.tan(20*Math.PI/180);

    var idx = 0;
    oContainer.onclick=function () {
        idx++;
        this.style.webkitTransform='rotateY('+ idx*40+'deg)'
    }
</script>
</body>
</html>